Experiment: 20150511-191302.min_required_count.100.chi2.accuracy.
Data parameters:
  Number of opinion shards: 1340
  Minimum required count: 100
  Using TF-IDF: True
Data loaded from /scratch/akp258/ml_output_data/feature_matrix.svmlight.shards.1340.mincount.100.tfidf.geniss , /scratch/akp258/ml_output_data/case_ids.shards.p.1340.mincount.100.tfidf.geniss , /scratch/akp258/ml_output_data/cases_df.shards.p.1340.mincount.100.tfidf.geniss , /scratch/akp258/ml_output_data/ngram_ids.shards.p.1340.mincount.100
Total time spent building data: 12.5683181286
Reading in ngram dictionary test_data/filtered_vocab_map.p.num_shards.508.cutoff.50
Loading ngram dictionary with 45011 keys
Training and scoring models...

Fitting New Model
Model: baseline
Feature Matrix Info:
  Number of cases 15466
  Number of features 23544
Training percentage 0.75
Scoring used: None
Splitting data into training and testing...
Total time: 0.0896170139313
	 	 pred
true 	 	 1 	 2 	 3
	 1 	 5651 	 0 	 0
	 2 	 1840 	 0 	 0
	 3 	 4108 	 0 	 0
Percent Accuracy: 48.720%
Training Accuracy 0.48719717217
	 	 pred
true 	 	 1 	 2 	 3
	 1 	 2154 	 0 	 0
	 2 	 627 	 0 	 0
	 3 	 1086 	 0 	 0
Percent Accuracy: 55.702%
Testing Accuracy 0.55702094647
Log file doesn't exist.  Creating from scratch.

Fitting New Model
Model: naive_bayes
Feature Matrix Info:
  Number of cases 15466
  Number of features 23544
Training percentage 0.75
Scoring used: accuracy
Regularization bounded between 10^(-2) and 10^(2):
Splitting data into training and testing...
Running Model Pipeline...
Fitting 3 folds for each of 4 candidates, totalling 12 fits
[Parallel(n_jobs=-1)]: Done   1 jobs       | elapsed:    1.2s
[Parallel(n_jobs=-1)]: Done  12 out of  12 | elapsed:    4.1s finished
Fitting Complete!

best estimator: Pipeline(steps=[('feature_reduction', SelectFpr(alpha=0.8, score_func=<function chi2 at 0x2acea540e1b8>)), ('classifier', MultinomialNB(alpha=1.0, class_prior=None, fit_prior=True))])
best params: {'feature_reduction__alpha': 0.8}
best score from that estimator: 0.551426847142
Label 0:
  liabil
  certain
  NOT FOUND
  NOT FOUND
  day
  secur
  measur damag
  shelter
  deni ct
  court ad
Label 1:
  secur
  decre affirm
  NOT FOUND
  requir
  analog
  measur damag
  nomin
  evid order
  deni ct
  court ad
Label 2:
  NOT FOUND
  begin
  analog
  fact appel
  nomin
  secur
  shelter
  measur damag
  deni ct
  court ad
Total time: 4.62367892265
	 	 pred
true 	 	 1 	 2 	 3
	 1 	 3531 	 171 	 1949
	 2 	 347 	 728 	 765
	 3 	 1085 	 114 	 2909
Percent Accuracy: 61.798%
Training Accuracy 0.617984308992
	 	 pred
true 	 	 1 	 2 	 3
	 1 	 1430 	 46 	 678
	 2 	 249 	 83 	 295
	 3 	 465 	 31 	 590
Percent Accuracy: 54.383%
Testing Accuracy 0.543832428239

Fitting New Model
Model: bernoulli_bayes
Feature Matrix Info:
  Number of cases 15466
  Number of features 23544
Training percentage 0.75
Scoring used: accuracy
Regularization bounded between 10^(-2) and 10^(2):
Splitting data into training and testing...
Running Model Pipeline...
Fitting 3 folds for each of 8 candidates, totalling 24 fits
[Parallel(n_jobs=-1)]: Done   1 jobs       | elapsed:    0.9s
[Parallel(n_jobs=-1)]: Done  11 out of  24 | elapsed:    3.4s remaining:    4.0s
[Parallel(n_jobs=-1)]: Done  24 out of  24 | elapsed:    6.1s finished
Fitting Complete!

best estimator: Pipeline(steps=[('feature_reduction', SelectFpr(alpha=0.6, score_func=<function chi2 at 0x2acea540e1b8>)), ('classifier', BernoulliNB(alpha=1.0, binarize=0.1, class_prior=None, fit_prior=True))])
best params: {'classifier__binarize': 0.1, 'feature_reduction__alpha': 0.6}
best score from that estimator: 0.547116130701
Label 0:
  NOT FOUND
  NOT FOUND
  issu appel
  refer
  corpor act
  ct ed present
  secur creditor
  ownership control
  NOT FOUND
  issu trial
Label 1:
  counti
  court deni motion
  NOT FOUND
  NOT FOUND
  asset
  ownership control
  secur creditor
  practic
  corpor act
  issu trial
Label 2:
  ct ed present
  litig
  secur creditor
  ownership control
  intox liquor
  corpor act
  settl
  NOT FOUND
  NOT FOUND
  issu trial
Total time: 6.54175710678
	 	 pred
true 	 	 1 	 2 	 3
	 1 	 3282 	 737 	 1632
	 2 	 288 	 1161 	 391
	 3 	 1034 	 562 	 2512
Percent Accuracy: 59.962%
Training Accuracy 0.599620656953
	 	 pred
true 	 	 1 	 2 	 3
	 1 	 1349 	 211 	 594
	 2 	 236 	 188 	 203
	 3 	 427 	 159 	 500
Percent Accuracy: 52.676%
Testing Accuracy 0.526764934057

Fitting New Model
Model: logistic
Feature Matrix Info:
  Number of cases 15466
  Number of features 23544
Training percentage 0.75
Scoring used: accuracy
Regularization bounded between 10^(-2) and 10^(2):
Splitting data into training and testing...
Running Model Pipeline...
Fitting 3 folds for each of 20 candidates, totalling 60 fits
[Parallel(n_jobs=-1)]: Done   1 jobs       | elapsed:    0.8s
[Parallel(n_jobs=-1)]: Done  22 out of  60 | elapsed:    8.0s remaining:   13.9s
[Parallel(n_jobs=-1)]: Done  60 out of  60 | elapsed:   38.2s finished
Fitting Complete!

best estimator: Pipeline(steps=[('feature_reduction', SelectFpr(alpha=1.0, score_func=<function chi2 at 0x2acea540e1b8>)), ('classifier', LogisticRegression(C=1, class_weight=None, dual=False, fit_intercept=True,
          intercept_scaling=1, max_iter=100, multi_class='ovr',
          penalty='l2', random_state=None, solver='liblinear', tol=0.0001,
          verbose=0))])
best params: {'classifier__C': 1, 'feature_reduction__alpha': 1.0}
best score from that estimator: 0.576773859816
Label 0:
  NOT FOUND
  patente
  appeal
  patent
  NOT FOUND
  dividend
  judgment district court affirm
  klem
  invent
  affirm
Label 1:
  conspiraci
  award
  bank
  fault
  damag
  remand
  contract
  parti
  count
  kkl
Label 2:
  petition
  custodian
  juri
  NOT FOUND
  deduct
  remedi
  new trial
  revers remand
  revers
  remand
Total time: 43.684278965
	 	 pred
true 	 	 1 	 2 	 3
	 1 	 4735 	 128 	 788
	 2 	 477 	 980 	 383
	 3 	 1142 	 119 	 2847
Percent Accuracy: 73.817%
Training Accuracy 0.738167083369
	 	 pred
true 	 	 1 	 2 	 3
	 1 	 1672 	 83 	 399
	 2 	 357 	 118 	 152
	 3 	 604 	 68 	 414
Percent Accuracy: 56.995%
Testing Accuracy 0.569950866305

Fitting New Model
Model: svm
Feature Matrix Info:
  Number of cases 15466
  Number of features 23544
Training percentage 0.75
Scoring used: accuracy
Regularization bounded between 10^(-2) and 10^(2):
Splitting data into training and testing...
Running Model Pipeline...
Fitting 3 folds for each of 20 candidates, totalling 60 fits
[Parallel(n_jobs=-1)]: Done   1 jobs       | elapsed:    1.2s
[Parallel(n_jobs=-1)]: Done  22 out of  60 | elapsed:   11.2s remaining:   19.3s
[Parallel(n_jobs=-1)]: Done  60 out of  60 | elapsed:  1.4min finished
Fitting Complete!

best estimator: Pipeline(steps=[('feature_reduction', SelectFpr(alpha=1.0, score_func=<function chi2 at 0x2acea540e1b8>)), ('classifier', LinearSVC(C=0.1, class_weight=None, dual=False, fit_intercept=True,
     intercept_scaling=1, loss='squared_hinge', max_iter=1000,
     multi_class='ovr', penalty='l2', random_state=0, tol=0.0001,
     verbose=0))])
best params: {'classifier__C': 0.1, 'feature_reduction__alpha': 1.0}
best score from that estimator: 0.576946288473
Label 0:
  claim
  appeal
  patente
  NOT FOUND
  judgment district court affirm
  dividend
  patent
  klem
  invent
  affirm
Label 1:
  breach
  indemn
  bank
  remand
  fault
  damag
  count
  contract
  parti
  kkl
Label 2:
  contributori neglig
  juri
  custodian
  NOT FOUND
  new trial
  deduct
  remedi
  revers remand
  revers
  remand
Total time: 87.4128751755
	 	 pred
true 	 	 1 	 2 	 3
	 1 	 4705 	 128 	 818
	 2 	 475 	 984 	 381
	 3 	 1173 	 117 	 2818
Percent Accuracy: 73.343%
Training Accuracy 0.733425295284
	 	 pred
true 	 	 1 	 2 	 3
	 1 	 1678 	 73 	 403
	 2 	 358 	 113 	 156
	 3 	 608 	 64 	 414
Percent Accuracy: 57.021%
Testing Accuracy 0.570209464701
Stratified model results saved to /scratch/akp258/ml_results/model_results.pkl.20150511-191302.min_required_count.100.chi2.accuracy..csv
